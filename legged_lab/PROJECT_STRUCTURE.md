# Legged Lab é¡¹ç›®æ¶æ„åˆ†æ

## ğŸ—ï¸ é¡¹ç›®æ•´ä½“æ¶æ„

```
legged_lab/
â”œâ”€â”€ envs/                    # ç¯å¢ƒå®šä¹‰
â”‚   â”œâ”€â”€ base/               # åŸºç¡€ç¯å¢ƒç±»
â”‚   â”‚   â”œâ”€â”€ base_env.py     # æ ¸å¿ƒç¯å¢ƒé€»è¾‘
â”‚   â”‚   â””â”€â”€ base_config.py  # é…ç½®ç±»å®šä¹‰
â”‚   â”œâ”€â”€ go2/               # GO2æœºå™¨äººé…ç½®
â”‚   â”œâ”€â”€ g1/                # G1æœºå™¨äººé…ç½®
â”‚   â”œâ”€â”€ h1/                # H1æœºå™¨äººé…ç½®
â”‚   â””â”€â”€ gr2/               # GR2æœºå™¨äººé…ç½®
â”œâ”€â”€ assets/                 # æœºå™¨äººèµ„äº§æ–‡ä»¶
â”‚   â”œâ”€â”€ unitree/           # Unitreeæœºå™¨äººæ¨¡å‹
â”‚   â””â”€â”€ fftai/             # FFTAIæœºå™¨äººæ¨¡å‹
â”œâ”€â”€ mdp/                   # é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ç»„ä»¶
â”‚   â””â”€â”€ rewards.py         # å¥–åŠ±å‡½æ•°å®ç°
â”œâ”€â”€ terrains/              # åœ°å½¢ç”Ÿæˆ
â”‚   â”œâ”€â”€ terrain_generator_cfg.py  # åœ°å½¢é…ç½®
â”‚   â””â”€â”€ ray_caster.py      # åœ°å½¢æ„ŸçŸ¥
â”œâ”€â”€ scripts/               # è®­ç»ƒå’Œæµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ train.py          # è®­ç»ƒè„šæœ¬
â”‚   â””â”€â”€ play.py           # æµ‹è¯•è„šæœ¬
â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
    â”œâ”€â”€ task_registry.py   # ä»»åŠ¡æ³¨å†Œ
    â””â”€â”€ cli_args.py        # å‘½ä»¤è¡Œå‚æ•°
```

## ğŸ”„ æ•°æ®æµå‘

### è®­ç»ƒæµç¨‹
```
1. ç¯å¢ƒåˆå§‹åŒ–
   â”œâ”€â”€ æœºå™¨äººæ¨¡å‹åŠ è½½ (assets/)
   â”œâ”€â”€ åœ°å½¢ç”Ÿæˆ (terrains/)
   â””â”€â”€ ä¼ æ„Ÿå™¨é…ç½®

2. å¼ºåŒ–å­¦ä¹ å¾ªç¯
   â”œâ”€â”€ è§‚å¯Ÿè·å– (BaseEnv.get_observations())
   â”œâ”€â”€ åŠ¨ä½œé€‰æ‹© (PPO Policy)
   â”œâ”€â”€ ç¯å¢ƒæ­¥è¿› (BaseEnv.step())
   â”œâ”€â”€ å¥–åŠ±è®¡ç®— (mdp/rewards.py)
   â””â”€â”€ ç­–ç•¥æ›´æ–° (RSL-RL)

3. è®­ç»ƒç®¡ç†
   â”œâ”€â”€ äº‹ä»¶ç®¡ç† (EventManager)
   â”œâ”€â”€ åŸŸéšæœºåŒ– (DomainRandomization)
   â””â”€â”€ è¯¾ç¨‹å­¦ä¹  (Curriculum Learning)
```

## ğŸ¯ æ ¸å¿ƒç±»å…³ç³»

```python
BaseEnv (base_env.py)
â”œâ”€â”€ ç»§æ‰¿è‡ª VecEnv (RSL-RL)
â”œâ”€â”€ åŒ…å« InteractiveScene (åœºæ™¯ç®¡ç†)
â”œâ”€â”€ åŒ…å« RewardManager (å¥–åŠ±ç®¡ç†)
â”œâ”€â”€ åŒ…å« EventManager (äº‹ä»¶ç®¡ç†)
â””â”€â”€ åŒ…å« CommandGenerator (å‘½ä»¤ç”Ÿæˆ)

BaseEnvCfg (base_env_config.py)
â”œâ”€â”€ scene: BaseSceneCfg (åœºæ™¯é…ç½®)
â”œâ”€â”€ robot: RobotCfg (æœºå™¨äººé…ç½®)
â”œâ”€â”€ reward: RewardCfg (å¥–åŠ±é…ç½®)
â””â”€â”€ domain_rand: DomainRandCfg (åŸŸéšæœºåŒ–)
```

## ğŸ“Š å…³é”®é…ç½®ç³»ç»Ÿ

### ç¯å¢ƒé…ç½®å±‚æ¬¡
```
BaseEnvCfg (åŸºç¡€é…ç½®)
â”œâ”€â”€ Go2FlatEnvCfg (GO2å¹³å¦åœ°å½¢)
â”‚   â””â”€â”€ Go2RoughEnvCfg (GO2å¤æ‚åœ°å½¢)
â”œâ”€â”€ H1FlatEnvCfg (H1å¹³å¦åœ°å½¢)
â”‚   â””â”€â”€ H1RoughEnvCfg (H1å¤æ‚åœ°å½¢)
â””â”€â”€ ...å…¶ä»–æœºå™¨äººé…ç½®
```

### å¥–åŠ±ç³»ç»Ÿæ¶æ„
```python
RewardCfg:
â”œâ”€â”€ track_lin_vel_xy_exp: é€Ÿåº¦è·Ÿè¸ª
â”œâ”€â”€ base_height_l2: é«˜åº¦æ§åˆ¶
â”œâ”€â”€ feet_air_time: è¶³ç«¯ç©ºä¸­æ—¶é—´
â”œâ”€â”€ upward: å‘ä¸Šæ–¹å‘å¥–åŠ±
â””â”€â”€ ...20+ä¸ªå¥–åŠ±é¡¹
```

## ğŸ¤– æ”¯æŒçš„æœºå™¨äºº

| æœºå™¨äºº | ç±»å‹ | è‡ªç”±åº¦ | ç‰¹ç‚¹ |
|--------|------|--------|------|
| GO2 | å››è¶³ | 12DOF | å°å‹ï¼Œé€‚åˆç ”ç©¶ |
| G1 | äººå½¢ | 37DOF | åŒè¶³è¡Œèµ° |
| H1 | äººå½¢ | 19DOF | è½»é‡çº§äººå½¢ |
| GR2 | å››è¶³ | 12DOF | é‡è½½å››è¶³ |

## ğŸ® ä½¿ç”¨æ–¹å¼

### è®­ç»ƒå‘½ä»¤
```bash
python scripts/train.py --task go2_rough --num_envs 4096
```

### æµ‹è¯•å‘½ä»¤
```bash
python scripts/play.py --task go2_rough --checkpoint path/to/model.pth
```

## ğŸ”§ è‡ªå®šä¹‰æ‰©å±•ç‚¹

1. **æ–°æœºå™¨äºº**: æ·»åŠ åˆ° `assets/` å’Œ `envs/`
2. **æ–°å¥–åŠ±**: åœ¨ `mdp/rewards.py` ä¸­å®ç°
3. **æ–°åœ°å½¢**: åœ¨ `terrains/` ä¸­é…ç½®
4. **æ–°ä»»åŠ¡**: åœ¨ `__init__.py` ä¸­æ³¨å†Œ

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

- Wandbé›†æˆç”¨äºå®éªŒè·Ÿè¸ª
- TensorBoardæ”¯æŒ
- å®æ—¶å¥–åŠ±æ›²çº¿ç›‘æ§
- åœ°å½¢éš¾åº¦è‡ªåŠ¨è°ƒèŠ‚
